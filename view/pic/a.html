<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>


<div id="app">
  <!-- 设置抢课频率 -->
  <el-dialog :visible.sync="dialog_visible" title="最后的设置">
    <el-form ref="form" :model="form" label-width="80px">
      <el-form-item label="课程名称">
        <el-input v-model="form.name" disabled="true"></el-input>
      </el-form-item>
      <el-form-item label="开课校园">
        <el-input v-model="form.region" disabled="true" width=10px></el-input>
      </el-form-item>
      <el-divider></el-divider>
      <el-form-item label="抢课时间">
        <el-col :span="11">
          <el-time-picker placeholder="Now" v-model="form.time1" style="width: 100%;" :disabled=true></el-time-picker>
        </el-col>
        <el-col class="line" :span="2" style="padding-left:4%"> -</el-col>
        <el-col :span="11">
          <el-time-select placeholder="结束时间" v-model="form.time2" :picker-options="{
start: '06:00',
step: '00:15',
end: '24:00',
minTime: startTime
}">
        </el-col>
      </el-form-item>
      <el-form-item label="时间不定">
        <el-tooltip class="item" effect="dark" content="无停止时间,直到显式停止抢课或电脑关机" placement="top">
          <el-switch v-model="form.no_time_limit" style="padding-top:1.7%"></el-switch>
        </el-tooltip>
      </el-form-item>
      <el-divider></el-divider>
      <el-form-item label="抢课频率">
        <el-select v-model="form.freq" placeholder="请选择抢课频率">
          <el-option label="0.1s" value="msec_100"></el-option>
          <el-option label="0.5s" value="msec_500"></el-option>
          <el-option label="1s" value="sec_1"></el-option>
          <el-option label="2s" value="sec_2"></el-option>
          <el-option label="5s" value="sec_5"></el-option>
          <el-option label="10s" value="sec_10"></el-option>
          <el-option label="15s" value="sec_15"></el-option>
          <el-option label="30s" value="sec_30"></el-option>
          <el-option label="1min" value="min_1"></el-option>
          <el-option label="5min" value="min_5"></el-option>
          <el-option label="10min" value="min_10"></el-option>
        </el-select>
      </el-form-item>
      <el-form-item label="特殊资源">
        <el-radio-group v-model="form.resource">
          <el-radio label="线上品牌商赞助"></el-radio>
          <el-radio label="线下场地免费"></el-radio>
        </el-radio-group>
      </el-form-item>
      <el-form-item label="活动形式">
        <el-input type="textarea" v-model="form.desc"></el-input>
      </el-form-item>
      <el-form-item>
        <el-button type="primary" @click="onSubmit">立即抢课</el-button>
        <el-button @click="dialog_visible = false">取消</el-button>
      </el-form-item>
    </el-form>
  </el-dialog>

  <template>
    <el-table :data="tableData.filter(data => !search || data.name.toLowerCase().includes(search.toLowerCase()))"
      style="width: 100%">
      <el-table-column label="Date" prop="date">
      </el-table-column>
      <el-table-column label="Name" prop="name">
      </el-table-column>
      <el-table-column align="right">
        <template slot="header" slot-scope="scope">
          <el-input v-model="search" size="mini" placeholder="输入关键字搜索" />
        </template>
        <template slot-scope="scope">
          <el-button size="mini" type="success" @click="handleEdit(scope.$index, scope.row)">抢课</el-button>
          <!-- <el-button size="mini" type="danger" @click="handleDelete(scope.$index, scope.row)">Delete</el-button> -->
        </template>
      </el-table-column>
    </el-table>
  </template>
</div>


<script>
  new Vue({
    el: "#app",
    data: function () {
      return {
        dialog_visible: false,
        form: {
          name: 'fdsa',
          region: 'fdas',
          time1: 'Now',
          time2: '',
          no_time_limit: false,
          type: [],
          resource: '',
          desc: ''
        },

        tableData: [{
          date: '2016-05-02',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1518 弄'
        }, {
          date: '2016-05-04',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1517 弄'
        }, {
          date: '2016-05-01',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1519 弄'
        }, {
          date: '2016-05-03',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1516 弄'
        }],
        search: ''
      }
    },
    methods: {
      handleEdit(index, row) {
        this.form = this.dialogEmpty()
        this.form = this.getCourseInfo(index, row)
        this.dialog_visible = true
      },
      dialogEmpty() {
        return {
          name: 'fdsa',
          region: 'fdas',
          time1: 'Now',
          time2: '23:59:59',
          no_time_limit: false,
          type: [],
          resource: '',
          desc: ''
        }
      },
      getCourseInfo(index, row) {
        return {
          name: index.toString(),
          region: row.date,
          time1: 'Now',
          time2: '23:59:59',
          no_time_limit: false,
          type: [],
          resource: '',
          desc: ''
        }
      }
    },
  })
</script>